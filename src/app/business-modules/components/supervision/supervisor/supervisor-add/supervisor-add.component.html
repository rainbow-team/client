<div style="height: 100%;background:#fff">
  <!-- <div class="div_top">
    监督员信息
  </div> -->

  <nz-tabset>
    <nz-tab nzTitle="监督员信息">
      <div class="div_contain_add" style="height: calc(100% - 20px);">
        <div nz-row class="ma_b20">
          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>姓名：
            <input nz-input name="name" [(ngModel)]="data.name" class="w200" required [validation]="true" [disabled]="isDisable" />
          </div>
          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>身份证号：
            <input nz-input name="identity" [(ngModel)]="data.identity" class="w200" required [validation]="true" [validationType]="'idcard'"
              [disabled]="isDisable" (ngModelChange)="identityChange($event)" />
          </div>
          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>性别：
            <nz-radio-group [(ngModel)]="sexValue" style="width: 200px;text-align: left;" [disabled]="isDisable">
              <label nz-radio nzValue="1">男</label>
              <label nz-radio nzValue="0">女</label>
            </nz-radio-group>
          </div>
        </div>

        <div nz-row class="ma_b20">
          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>出生年月：
            <nz-date-picker name="birthday" [nzStyle]="dataStyle" [(ngModel)]="data.birthday" class="w200" required [validation]="true"
              [disabled]="isDisable" [disabled]="isDisable">
            </nz-date-picker>
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>所属单位：
            <nz-select nzAllowClear [(ngModel)]="data.orgId" class="w200" [disabled]="isDisable" required [validation]="true">
              <nz-option *ngFor="let option of orgList" [nzLabel]="option.name" [nzValue]="option.id">
              </nz-option>
            </nz-select>
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>入职时间：
            <nz-date-picker name="entryDate" [disabled]="isDisable" [(ngModel)]="data.entryDate" class="w200" required [validation]="true">
            </nz-date-picker>
          </div>

        </div>

        <div nz-row class="ma_b20">

          <div nz-col [nzSpan]="8" class="ta_r">
            职称：
            <nz-select nzAllowClear [(ngModel)]="data.titleId" class="w200" [disabled]="isDisable">
              <nz-option *ngFor="let option of dictionary.config_title" [nzLabel]="option.value" [nzValue]="option.id">
              </nz-option>
            </nz-select>
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            职务：
            <input nz-input name="post" [(ngModel)]="data.post" class="w200" [disabled]="isDisable" />
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>政治面貌：
            <nz-select nzAllowClear [(ngModel)]="data.politicalId" class="w200" [disabled]="isDisable" required [validation]="true">
              <nz-option *ngFor="let option of dictionary.config_political" [nzLabel]="option.value" [nzValue]="option.id">
              </nz-option>
            </nz-select>
          </div>

        </div>

        <div nz-row class="ma_b20">

          <div nz-col [nzSpan]="8" class="ta_r">
            <span class="clo_r">*</span>联系方式：
            <input nz-input name="contact" [(ngModel)]="data.contact" class="w200" [disabled]="isDisable" required [validation]="true"
              [validationType]="'phonenumber'" />
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            从事核安全工作时间：
            <input nz-input name="continueTime" [(ngModel)]="data.continueTime" class="w200" [disabled]="isDisable" />
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            学历：
            <nz-select nzAllowClear [(ngModel)]="data.educationId" class="w200" [disabled]="isDisable">
              <nz-option *ngFor="let option of dictionary.config_education" [nzLabel]="option.value" [nzValue]="option.id">
              </nz-option>
            </nz-select>
          </div>
        </div>

        <div nz-row class="ma_b20" [nzType]="'flex'" [nzAlign]="'top'">
          <div nz-col [nzSpan]="8" class="ta_r">
            学位：
            <nz-select nzAllowClear [(ngModel)]="data.degreeId" class="w200" [disabled]="isDisable">
              <nz-option *ngFor="let option of dictionary.config_degree" [nzLabel]="option.value" [nzValue]="option.id">
              </nz-option>
            </nz-select>
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            毕业学校：
            <input nz-input name="educationSchool" [(ngModel)]="data.educationSchool" class="w200" [disabled]="isDisable" />
          </div>

          <div nz-col [nzSpan]="8" class="ta_r">
            毕业时间：
            <nz-date-picker name="educateDate" [(ngModel)]="data.educateDate" class="w200" [disabled]="isDisable">
            </nz-date-picker>
          </div>

        </div>

        <div nz-row class="ma_b20" [nzType]="'flex'" [nzAlign]="'top'">
          <div nz-col [nzSpan]="8" class="ta_r">
            专业：
            <input nz-input name="major" [(ngModel)]="data.major" class="w200" [disabled]="isDisable" />
          </div>
          <div nz-col [nzSpan]="8" class="ta_r">
            备注：
            <input nz-input name="note" [(ngModel)]="data.note" class="w200" [disabled]="isDisable" />
          </div>
        </div>

        <app-attachment [fileList]="fileList" [refid]="data.id" [isDisable]="isDisable"></app-attachment>
      </div>

     

    </nz-tab>

    <nz-tab nzTitle="培训信息" *ngIf="isDisable">
      <div style="    padding: 0 30px;">
        <div nz-row style="height: 50px" [nzType]="'flex'" [nzAlign]="'middle'">
          <div nz-col [nzSpan]="8">
            <nz-input-group [nzSuffix]="suffixIconSearch1" style="width: 300px;">
              <input type="text" nz-input placeholder="请输入班次搜索" [(ngModel)]="batchSearch">
            </nz-input-group>
            <ng-template #suffixIconSearch1>
              <i nz-icon type="search" (click)="search()"></i>
            </ng-template>
          </div>
        </div>
        <div nz-row>
          <nz-table #nestedTable [nzData]="dataSet" class="commontable" [nzFrontPagination]="false" [nzTotal]="totalCount" [nzPageIndex]="pageIndex"
            nzShowSizeChanger [nzPageSize]="pageSize" (nzPageIndexChange)="pageIndexChange($event)" class="tablescoll_rainbow">
            <thead>
              <tr>
                <th>序号</th>
                <th>培训班次</th>
                <th>培训开始时间</th>
                <th>培训结束时间</th>
                <th>成绩</th>
                <th>监督员证号</th>
                <th>发证日期</th>
                <th>到期时间</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of nestedTable.data;index as index ">
                <td>{{(pageIndex-1)*pageSize+1+index}}</td>
                <td>{{data.trainClass}}</td>
                <td>{{data.trainStartDate|recordtime}}</td>
                <td>{{data.trainEndDate|recordtime}}</td>
                <td>{{data.score}}</td>
                <td>{{data.number}}</td>
                <td>{{data.issueDate|recordtime}}</td>
                <td>{{data.expireDate|recordtime}}</td>
              </tr>
            </tbody>
          </nz-table>

        </div>
      </div>
    </nz-tab>

  </nz-tabset>



  <div nz-row [nzType]="'flex'" [nzAlign]="'middle'" class="div_bottom_add" [nzJustify]="'end'">
    <button nz-button nzType="primary" (click)="save()" *ngIf="!isDisable" style="margin-right: 10px;" [nzLoading]="isSaving">保存</button>
    <button nz-button nzType="default" (click)="close()">关闭</button>
  </div>
</div>